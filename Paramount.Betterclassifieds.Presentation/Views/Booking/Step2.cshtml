@using Paramount
@model Paramount.Betterclassifieds.Presentation.ViewModels.Booking.Step2View

@{
    ViewBag.Title = "Classifieds - Place new Ad";
    Layout = @Url.ClientUrl("~/Views/Shared/_ApplicationLayout.cshtml");
}

<div class="container">
    <ul class="nav nav-tabs" role="tablist">
        <li><a href="#">1</a></li>
        <li class="active"><a href="#">Step 2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
    </ul>

    <form role="form" id="adDesignForm" action="@Url.Action("Step2", "Booking")" method="POST">
        @Html.AntiForgeryToken()

        <div class="row top-buffer-20">
            <div class="col-xs-12">

                <div class="bs-callout bs-callout-info">
                    <h4>Online Ad Details</h4>
                    <p>Ok. You might want to entice the readers with an impact heading.</p>
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => m.OnlineAdHeading)
                    @Html.BootstrapLargeTextBoxFor(m => m.OnlineAdHeading)
                    @Html.ValidationMessageFor(m => m.OnlineAdHeading)
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => m.OnlineAdDescription)
                    @Html.BootstrapLargeTextAreaFor(m => m.OnlineAdDescription, 8, new Dictionary<string, object> { { "class", "markdown-editor" }, { "data-provide", "markdown-editable" } })
                    @Html.ValidationMessageFor(m => m.OnlineAdDescription)
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => m.OnlineAdContactName)
                    @Html.BootstrapLargeTextBoxFor(m => m.OnlineAdContactName)
                    @Html.ValidationMessageFor(m => m.OnlineAdContactName)
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => m.OnlineAdEmail)
                    @Html.BootstrapLargeTextBoxFor(m => m.OnlineAdEmail)
                    @Html.ValidationMessageFor(m => m.OnlineAdEmail)
                </div>

                <div class="form-group">
                    @Html.LabelFor(m => m.OnlineAdPhone)
                    @Html.BootstrapLargeTextBoxFor(m => m.OnlineAdPhone)
                    @Html.ValidationMessageFor(m => m.OnlineAdPhone)
                </div>

                <div class="panel panel-default" id="onlineImages">
                    <div class="panel-heading">
                        <span class="btn btn-success fileinput-button">
                            <i class="glyphicon glyphicon-plus"></i>
                            <span>Select images...</span>
                            <!-- The file input field used as target for the file upload widget -->
                            <input id="fileupload" type="file" name="files[]" multiple>
                        </span>
                    </div>
                    <div class="panel-body upload-thumbs">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                                <span class="sr-only">0% complete</span>
                            </div>
                        </div>


                        <div class="col-lg-2 col-md-3 col-sm-4 col-xs-6">

                            <img class="img-thumbnail" alt="140x140" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDAiIGhlaWdodD0iMTQwIj48cmVjdCB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjcwIiB5PSI3MCIgc3R5bGU9ImZpbGw6I2FhYTtmb250LXdlaWdodDpib2xkO2ZvbnQtc2l6ZToxMnB4O2ZvbnQtZmFtaWx5OkFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmO2RvbWluYW50LWJhc2VsaW5lOmNlbnRyYWwiPjE0MHgxNDA8L3RleHQ+PC9zdmc+" style="width: 140px; height: 140px;">

                        </div>


                    </div>
                </div>
            </div>
        </div>

        @if (Model.IsLineAdIncluded)
        {
            <div class="row top-buffer-10">
                <div class="col-xs-12">
                    <div class="bs-callout bs-callout-info">
                        <h4>Print Ad Details</h4>
                        <p>Coming soon</p>
                    </div>
                </div>
            </div>
        }

        @*Pager*@
        <ul class="pager">
            <li class="previous">
                <button id="btnPrev" class="btn btn-large btn-default js-load" data-nav='@Url.Action("Step1")'>&larr; Previous</button>
            </li>
            <li class="next">
                <button id="btnSubmit" type="submit" class="btn btn-large btn-default">Next &rarr;</button>
            </li>
        </ul>
    </form>
</div>

@section Scripts{

    <script>
        (function ($) {
            var onlineImages = function (data) {
                this.images = ko.observable(data);
            };



            var $imageUploadProgress = $('#onlineImages .progress-bar');

            $('.markdown-editor').markdown({
                autofocus: false,
                savable: false
            });

            $('#fileupload').fileupload({
                dataType: 'json',
                url: '@Url.Action("UploadOnlineImage", "Booking")',
                autoUpload: true,
                done: function (e, data) {
                    if (data.documentId) {

                    }
                }
            }).on('fileuploadprogressall', function (e, data) {
                console.log('progress ' + data.loaded);
                console.log('progress ' + data.total);
            }).on('fileuploadstart', function (e, data) {
                $imageUploadProgress.parent().removeClass('hidden');
            });

        })(jQuery);
    </script>
}